<html>
  <head>	   
    <title>Doppleruv efekt</title>		
  </head>
  <body>  
    <header>
    	Doppleruv efekt
  	</header>	
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/addons/p5.sound.js"></script>
    <script>
      let xspacing = 16; // Distance between each horizontal location
      let w; // Width of entire wave
      let theta = 0.0; // Start angle at 0
      let amplitude = 100.0; // Height of wave
      let period = 500.0; // How many pixels before the wave repeats
      let dx; // Value for incrementing x
      let yvalues; // Using an array to store height values for the wave
      
      function setup() {
        createCanvas(800, 400);
        w = width + 16;
        dx = (TWO_PI / period) * xspacing;
        yvalues = new Array(floor(w / xspacing));
      
        // Create buttons
        let normalButton = createButton("Normal");
        normalButton.position(10, height + 10);
        normalButton.mousePressed(setNormalPeriod);
      
        let doubleButton = createButton("Double");
        doubleButton.position(80, height + 10);
        doubleButton.mousePressed(setDoublePeriod);
      
        let halfButton = createButton("Half");
        halfButton.position(150, height + 10);
        halfButton.mousePressed(setHalfPeriod);
      }
      
      function draw() {
        background(255); // Set background to white
        calcWave();
        renderWave();
      }
      
      function calcWave() {
        // Increment theta (try different values for
        // 'angular velocity' here)
        theta += 0.02;
      
        // For every x value, calculate a y value with the sine function
        let x = theta;
        for (let i = 0; i < yvalues.length; i++) {
          yvalues[i] = sin(x) * amplitude;
          x += dx;
        }
      }
      
      function renderWave() {
        noStroke();
        fill(0, 0, 255); // Set fill to blue
        // Draw points representing the sine wave
        for (let x = 0; x < yvalues.length; x++) {
          ellipse(x * xspacing, height / 2 + yvalues[x], 8, 8);
        }
      }
      
      // Button functions
      function setNormalPeriod() {
        period = 500.0;
        dx = (TWO_PI / period) * xspacing;
      }
      
      function setDoublePeriod() {
        period = 1000.0;
        dx = (TWO_PI / period) * xspacing;
      }
      
      function setHalfPeriod() {
        period = 250.0;
        dx = (TWO_PI / period) * xspacing;
      }  
    </script>
    <button onclick="playSineWave440hz()">Sine wave  normal f</button>  
    <script src="index.js"></script> 
    <h1>F1 doppler efekt</h1>

    <audio id="audioPlayer" controls>
        <source src="F1soundeffect.mp3" type="audio/mp3">        
    </audio>

    <button id="playButton">Play</button>
    <button id="stopButton">Stop</button>

    <script>
        const audio = document.getElementById('audioPlayer');
        const playButton = document.getElementById('playButton');
        const stopButton = document.getElementById('stopButton');

        playButton.addEventListener('click', () => {
            audio.play();
        });

        stopButton.addEventListener('click', () => {
            audio.pause();
            audio.currentTime = 0;
        });
    </script>
  </body>
</html>


<style>
  /*Styles*/
  body {
      background-color: rgb(53, 17, 58);
      margin: 0;
      padding: 0;
    }
    
    header {
      background-color: darkred;
      padding: 10px;
      text-align: center;
      color: white;
      font-size: 24px;
    }

    nav {
      background-color: #4589e2;
      color: rgb(255, 255, 255);
      padding: 30px;
      width: 400px;
    }

    h2 {
      font-size: 28px; /* Adjust the font size for your preferred size */
    }

    canvas {
      display: block;
      margin: 20px auto; /* Adjust the margin for your preferred position */
      margin-right: 600px; /* Add a margin to move the canvas to the right */
    }
  </style>